if(typeof AdPlayerManager==="undefined"){var AdPlayerManager=(function(){var d={};var a=[];var b=[];d.list=function(){return a};d.addAdPlayer=function(f){for(var e=0;e<a.length;e++){if(a[e].adDomElement().id==f.adDomElement().id){return}}a.push(f);c(f)};d.register=function(e){b.push(e)};d.unregister=function(f){for(var e=0;e<b.length;e++){if(b[e]==f){b.shift(e,1);return}}};d.getAdPlayerById=function(f){for(var e=0;e<a.length;e++){if(a[e].adDomElement()){if(a[e].adDomElement().id==f){return a[e]}}else{log("DOM element is not properly specified.","getPlayerById")}}return null};d.getPlayerByDomElement=function(f){for(var e=0;e<a.length;e++){if(a[e].adDomElement()){if(a[e].adDomElement()==f){return a[e]}}else{log("DOM element is not properly specified.","getPlayerByDomElement")}}return null};function c(g){var e=b.length;var h=0;var f=0;do{if(typeof b[f]=="function"){b[f](g)}if(b>0){h=e-b.length;e=b.length}else{e=0}if(h==0){f++}}while(f<e)}return d})();var PrivacyInfo=(function(){var a={};a.adServer="";a.message="";a.url="";return a});var URLRequest=(function(a){var b={};b.url;if(a){b.url=a}b.load=function(){if(b.url){var d=document.createElement("img");d.src=(b.url);d.style.display="none";var c=document.getElementsByTagName("script")[0];log(b.url,"URLRequest");c.parentNode.insertBefore(d,c);c.parentNode.removeChild(d);delete d;delete c}else{log("URLRequest",'Parameter "url" is not defined.')}};return b});function AdEvent(d,f){var b="";this.type=function(g){if(g){b=g}return b};if(d){b=d}var e={};this.currentTarget=function(g){if(g){e=g}return e};var c=new Object();this.data=function(g){if(g){c=g}return c};if(f){c=f}var a;this.target=function(g){if(g){a=g}return a}}var defaultAdEvents=["INIT","LOAD","REMOVE","SHOW","HIDE","PROGRESS","TRACK","COUNT","CLICK","PRIVACY_CLICK","PRIVACY_OPEN","PRIVACY_CLOSE"];AdEvent.list=new Object();AdEvent.check=function(b){for(var a in AdEvent.list){if(AdEvent.list[a]==b){return true}}log("Ad Event type is not valid: "+b,"AdEvent");return false};AdEvent.map=function(a){AdEvent.list[a]="AdEvent."+a;AdEvent[a]="AdEvent."+a};for(var dae=0;dae<defaultAdEvents.length;dae++){AdEvent.map(defaultAdEvents[dae])}AbstractPlayer=(function(h,k){var f={};var j;f.uid=function(l){if(l){j=l}return j};f.uid(h);var g;f.adDomElement=function(l){if(l){g=l}return g};f.adDomElement(k);var d=new Object();f.adEventListObj=function(){return d};var c=false;f.isLoaded=function(l){if(l){c=l}return c};var i=false;f.isPrivacyPanelEnabled=function(l){if(l){i=l}return i};var b=null;f.adWidth=function(l){if(l){b=l;this.adDomElement().style.width=b+"px"}return b};var a=null;f.adHeight=function(l){if(l){a=l;this.adDomElement().style.height=a+"px"}return a};var e=[];f.privacyInfoList=function(){return e};f.addEventListener=function(l,m){};f.removeEventListener=function(l,m){};f.addTrackingPixel=function(l,m,n){};f.removeTrackingPixel=function(l,m){};f.track=function(m,l){};f.addPrivacyInfo=function(l,n,m){};f.enableAdChoice=function(){};f.disableAdChoice=function(){};f.showPrivacyInfo=function(){};f.hidePrivacyInfo=function(){};return f});var DefaultPlayer=(function(b,a){var c=new AbstractPlayer(b,a);c.addEventListener=function(d,f){if(!AdEvent.check(d)){return}if(!this.adEventListObj()[d]){this.adEventListObj()[d]=[]}for(var e=0;e<this.adEventListObj()[d].length;e++){if(this.adEventListObj()[d][e]==f){return}}this.adEventListObj()[d].push(f)};c.removeEventListener=function(d,f){if(!AdEvent.check(d)){return}if(this.adEventListObj()[d]){for(var e=0;e<this.adEventListObj()[d].length;e++){if(this.adEventListObj()[d][e]==f){this.adEventListObj()[d].splice(e,1);if(this.adEventListObj()[d].length==0){delete this.adEventListObj()[d]}return}}}};c.addTrackingPixel=function(d,e,g){if(!AdEvent.check(d)){return}if(g===undefined){g=true}if(e){function f(h){var i=new URLRequest(e);i.load();if(!g){h.player().removeEventListener(h.type(),f)}}f.url=e;f.repeat=g;this.addEventListener(d,f)}else{log("Parameter 'url' must be defined","addTrackingEvent")}};c.removeTrackingPixel=function(d,g){if(!AdEvent.check(d)){return}if(this.adEventListObj()[d]){var e=this.adEventListObj()[d].length;var h=0;var f=0;do{if(g){if(this.adEventListObj()[d][f].name=="defaultTrackCallBack"){if(this.adEventListObj()[d][f].url){if(this.adEventListObj()[d][f].url==g){this.adEventListObj()[d].splice(f,1);if(this.adEventListObj()[d].length==0){delete this.adEventListObj()[d];return}}}}}if(this.adEventListObj()[d]){h=e-this.adEventListObj()[d].length;e=this.adEventListObj()[d].length}else{e=0}if(h==0){f++}}while(f<e)}};c.track=function(i,f,g){if(!AdEvent.check(i.type())){return}log(i.type(),"track");if(this.adEventListObj()[i.type()]){var d=this.adEventListObj()[i.type()].length;var j=0;var e=0;do{i.target(c);if(g){i.currentTarget(g)}else{i.currentTarget(g)}if(f){i.data().url=f}this.adEventListObj()[i.type()][e](i);if(this.adEventListObj()[i.type()]){j=d-this.adEventListObj()[i.type()].length;d=this.adEventListObj()[i.type()].length}else{d=0}if(j==0){e++}}while(e<d)}if(f){var h=new URLRequest(f);h.load()}};c.addPrivacyInfo=function(d,g,f){var e=new PrivacyInfo();e.adServer=d;e.message=g;e.url=f;this.privacyInfoList().push(e)};c.privacyClickBtn;c.enableAdChoice=function(){if(!this.isPrivacyPanelEnabled()){for(var d=0;d<this.adDomElement().getElementsByTagName("button").length;d++){if(this.adDomElement().getElementsByTagName("button")[0].className=="privacyButton"){}return}this.privacyClickBtn=document.createElement("button");this.privacyClickBtn.setAttribute("class","privacyButton");this.privacyClickBtn.setAttribute("className","privacyButton");this.privacyClickBtn.innerHTML="Get Info";this.adDomElement().style.position="relative";this.adDomElement().appendChild(this.privacyClickBtn);var e=this;this.privacyClickBtn.onclick=function(){e.showPrivacyInfo()}}};c.disableAdChoice=function(){if(this.isPrivacyPanelEnabled()){if(this.privacyClickBtn){this.adDomElement().removeChild(this.privacyClickBtn)}}};c.privacyPanel;c.showPrivacyInfo=function(){if(!this.privacyPanel){this.privacyPanel=document.createElement("div");this.privacyPanel.setAttribute("class","privacyPanel");this.privacyPanel.setAttribute("className","privacyPanel");var g=document.createElement("ul");var e=document.createElement("button");var f=this;this.privacyPanel.appendChild(g);this.privacyPanel.appendChild(e);this.adDomElement().appendChild(this.privacyPanel);e.innerHTML="Close";for(var d=0;d<this.privacyInfoList().length;d++){var h=document.createElement("li");privacyClick=function(i){var j=new Object();j.url=i;f.track(new AdEvent(AdEvent.PRIVACY_CLICK,j));window.open(i)};h.innerHTML=this.privacyInfoList()[d].adServer+"<span>"+this.privacyInfoList()[d].message+"<br/><a href=\"javascript:privacyClick('"+this.privacyInfoList()[d].url+'\');" target="_self">Opt Out</a></span>';g.appendChild(h)}this.isPrivacyPanelEnabled(true);e.onclick=function(){f.hidePrivacyInfo()};this.track(new AdEvent(AdEvent.PRIVACY_OPEN))}};c.hidePrivacyInfo=function(){if(this.privacyPanel){this.isPrivacyPanelEnabled(false);this.adDomElement().removeChild(this.privacyPanel);this.privacyPanel=null;this.track(new AdEvent(AdEvent.PRIVACY_CLOSE))}};return c});var ReferencePlayer=(function(d,a,c){var f=new AbstractPlayer(d,a);var b=new DefaultPlayer(d,a);function e(h,g){b[h].apply(f,g);c[h].apply(f,g)}f.addEventListener=function(g,h){e("addEventListener",[g,h,this])};f.removeEventListener=function(g,h){e("removeEventListener",[g,h,this])};f.addTrackingPixel=function(g,h,i){e("addTrackingPixel",[g,h,i,this])};f.removeTrackingPixel=function(g,h){e("removeTrackingPixel",[g,h,this])};f.track=function(i,g,h){e("track",[i,g,h,this])};f.addPrivacyInfo=function(g,i,h){e("addPrivacyInfo",[g,i,h,this])};f.enableAdChoice=function(){e("enableAdChoice",[this])};f.showPrivacyInfo=function(){e("showPrivacyInfo",[this])};f.hidePrivacyInfo=function(){e("hidePrivacyInfo",[this])};return f});var PlayerFactory=(function(e,b,i,a,c){var h=(window.location!=window.parent.location)?true:false;if(h){a(new DefaultPlayer(e,i));return}if(c){function g(l){var k=setInterval(j,100);var n=this;var m=0;function j(){m++;if(m==100){clearInterval(k);log('No Valid AdPlayer for "'+e+'" could be found from referral player. Creating default...',"refAdPlayerWait");a(new DefaultPlayer(e,document.getElementById(b)))}if(document.getElementById(b)){log("Found referral AdPlayer ===> "+l.uid()+" from: "+e);clearInterval(k);a(new ReferencePlayer(e,document.getElementById(b),l))}}}g(c);return}if(i){var f=AdPlayerManager.getPlayerByDomElement(i);if(f){a(f)}else{d(e,b,i,a)}}else{d(e,b,i,a)}function d(m,o,j,n){var q=new Date().getTime();var p=document.getElementById(o);if(!p){log('WARNING: No valid referral element specified for "'+m+'". Referral will be created using "document.write"',"parentDomSearch");o="ref"+q;document.write('<span id="'+o+'"></span>')}function l(v,u){var s=setInterval(r,100);var w=this;var t=0;function r(){t++;if(t==100){clearInterval(s);log("No Valid Ad Player could be found. Creating default...","refWait");n(new DefaultPlayer(m,j))}if(document.getElementById(v)){clearInterval(s);u(v)}}}function k(t){var r=document.getElementById(t).parentNode;log("-------ABOUT TO SEARCH------FROM: "+t);while(!AdPlayerManager.getAdPlayerById(r.id)){r=r.parentNode;parName=r.nodeName.toLowerCase();if((parName=="body")||(parName=="html")){break}}if(r){var s=AdPlayerManager.getAdPlayerById(r.id);if(s){if(n){log("Found player at "+s.adDomElement().id);n(s)}}else{log("No AdPlayer found after parent search. Creating new player for "+t);n(new DefaultPlayer(m,j))}}}l(o,k)}});log=function(b,a){if(typeof(console)!=="undefined"&&console!=null){if(a){console.log("AdPlayer("+a+"): "+b)}else{console.log("AdPlayer: "+b)}}};var AdPlayer=(function(g,c,a,e){var l=document.getElementById(c);var i=[];var f=new AbstractPlayer(g,l);var d;f.player=function(){return d};f.adDomElement=function(m){return d.adDomElement(m)};f.adEventListObj=function(){return d.adEventListObj()};f.isLoaded=function(m){return d.isLoaded(m)};f.isPrivacyPanelEnabled=function(m){return d.isPrivacyPanelEnabled(m)};f.adWidth=function(m){return d.adWidth(m)};f.adHeight=function(m){return d.adHeight(m)};f.privacyInfoList=function(){return d.privacyInfoList()};var h=[];function k(n,m){if(!d){h.push(b(f[n],f,m));return}d[n].apply(f,m)}function b(n,m,o){return function(){n.apply(m,o)}}f.addEventListener=function(m,n){k("addEventListener",[m,n,this])};f.removeEventListener=function(m,n){k("removeEventListener",[m,n,this])};f.addTrackingPixel=function(m,n,o){k("addTrackingPixel",[m,n,o,this])};f.removeTrackingPixel=function(m,n){k("removeTrackingPixel",[m,n,this])};f.track=function(n,m){k("track",[n,m,this])};f.addPrivacyInfo=function(m,o,n){k("addPrivacyInfo",[m,o,n,this])};f.enableAdChoice=function(){k("enableAdChoice",[this])};f.disableAdChoice=function(){k("disableAdChoice",[this])};f.showPrivacyInfo=function(){k("showPrivacyInfo",[this])};f.hidePrivacyInfo=function(){k("hidePrivacyInfo",[this])};function j(){var n=new PlayerFactory(g,c,l,m,e);function m(o){d=o;f.adDomElement(l);AdPlayerManager.addAdPlayer(f);if(a){a(f)}d.track(new AdEvent(AdEvent.INIT),null,f);while(h.length>0){(h.shift())()}}}j();return f})};