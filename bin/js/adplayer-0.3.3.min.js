if(typeof AdPlayerManager==="undefined"){var AdPlayerManager=(function(){var f={};var a=[];var c=[];var e=[];f.list=function(){return a};var b=[];f.domIdList=function(){return b};f.searchCount=0;f.isSearching=function(g){if(f.searchCount==0){return false}else{return true}};f.addAdPlayer=function(h){for(var g=0;g<a.length;g++){if(a[g].adDomElement().id==h.adDomElement().id){return}}a.push(h);d(h)};f.register=function(g){c.push(g)};f.unregister=function(h){for(var g=0;g<c.length;g++){if(c[g]==h){c.shift(g,1);return}}};f.getAdPlayerById=function(h){for(var g=0;g<a.length;g++){if(a[g].adDomElement()){if(a[g].adDomElement().id==h){return a[g]}}else{log("DOM element is not properly specified.","getPlayerById")}}return null};f.getPlayerByDomElement=function(h){for(var g=0;g<a.length;g++){if(a[g].adDomElement()){if(a[g].adDomElement()==h){return a[g]}}else{log("DOM element is not properly specified.","getPlayerByDomElement")}}return null};function d(i){var g=c.length;var j=0;var h=0;do{if(typeof c[h]=="function"){c[h](i)}if(c>0){j=g-c.length;g=c.length}else{g=0}if(j==0){h++}}while(h<g)}return f})();var PrivacyInfo=(function(){var a={};a.adServer="";a.message="";a.url="";return a});var URLRequest=(function(a){var b={};b.url;if(a){b.url=a}b.load=function(){if(b.url){var d=document.createElement("img");d.src=(b.url);d.style.display="none";var c=document.getElementsByTagName("script")[0];log(b.url,"URLRequest");c.parentNode.insertBefore(d,c);c.parentNode.removeChild(d);delete d;delete c}else{log("URLRequest",'Parameter "url" is not defined.')}};return b});function AdEvent(d,f){var b="";this.type=function(g){if(g){b=g}return b};if(d){b=d}var e={};this.currentTarget=function(g){if(g){e=g}return e};var c=new Object();this.data=function(g){if(g){c=g}return c};if(f){c=f}var a;this.target=function(g){if(g){a=g}return a}}var defaultAdEvents=["INIT","LOAD","REMOVE","SHOW","HIDE","PROGRESS","TRACK","COUNT","CLICK","PRIVACY_CLICK","PRIVACY_OPEN","PRIVACY_CLOSE"];AdEvent.list=new Object();AdEvent.check=function(b){for(var a in AdEvent.list){if(AdEvent.list[a]==b){return true}}log("Ad Event type is not valid: "+b,"AdEvent");return false};AdEvent.map=function(a){AdEvent.list[a]="AdEvent."+a;AdEvent[a]="AdEvent."+a};for(var dae=0;dae<defaultAdEvents.length;dae++){AdEvent.map(defaultAdEvents[dae])}AbstractPlayer=(function(h,l){var f={};var k;f.uid=function(m){if(m){k=m}return k};f.uid(h);var g;f.adDomElement=function(m){if(m){g=m}return g};f.adDomElement(l);var d=new Object();f.adEventListObj=function(){return d};var c=false;f.isLoaded=function(m){if(m){c=m}return c};var i=false;f.isPrivacyPanelEnabled=function(m){if(m){i=m}return i};var j=false;f.isAdChoiceEnabled=function(m){if(m){j=m}return j};var b=null;f.adWidth=function(m){if(m){b=m;this.adDomElement().style.width=b+"px"}return b};var a=null;f.adHeight=function(m){if(m){a=m;this.adDomElement().style.height=a+"px"}return a};var e=[];f.privacyInfoList=function(){return e};f.addEventListener=function(m,n){};f.removeEventListener=function(m,n){};f.addTrackingPixel=function(m,n,o){};f.removeTrackingPixel=function(m,n){};f.track=function(n,m){};f.addPrivacyInfo=function(m,o,n){};f.enableAdChoice=function(){};f.disableAdChoice=function(){};f.showPrivacyInfo=function(){};f.hidePrivacyInfo=function(){};return f});var DefaultPlayer=(function(b,a){var c=new AbstractPlayer(b,a);c.addEventListener=function(d,f){if(!AdEvent.check(d)){return}if(!this.adEventListObj()[d]){this.adEventListObj()[d]=[]}for(var e=0;e<this.adEventListObj()[d].length;e++){if(this.adEventListObj()[d][e]==f){return}}this.adEventListObj()[d].push(f)};c.removeEventListener=function(d,f){if(!AdEvent.check(d)){return}if(this.adEventListObj()[d]){for(var e=0;e<this.adEventListObj()[d].length;e++){if(this.adEventListObj()[d][e]==f){this.adEventListObj()[d].splice(e,1);if(this.adEventListObj()[d].length==0){delete this.adEventListObj()[d]}return}}}};c.addTrackingPixel=function(d,e,g){if(!AdEvent.check(d)){return}if(g===undefined){g=true}if(e){function f(h){var i=new URLRequest(e);i.load();if(!g){h.player().removeEventListener(h.type(),f)}}f.url=e;f.repeat=g;this.addEventListener(d,f)}else{log("Parameter 'url' must be defined","addTrackingEvent")}};c.removeTrackingPixel=function(d,g){if(!AdEvent.check(d)){return}if(this.adEventListObj()[d]){var e=this.adEventListObj()[d].length;var h=0;var f=0;do{if(g){if(this.adEventListObj()[d][f].name=="defaultTrackCallBack"){if(this.adEventListObj()[d][f].url){if(this.adEventListObj()[d][f].url==g){this.adEventListObj()[d].splice(f,1);if(this.adEventListObj()[d].length==0){delete this.adEventListObj()[d];return}}}}}if(this.adEventListObj()[d]){h=e-this.adEventListObj()[d].length;e=this.adEventListObj()[d].length}else{e=0}if(h==0){f++}}while(f<e)}};c.track=function(i,f,g){if(!AdEvent.check(i.type())){return}log(i.type(),"track");if(this.adEventListObj()[i.type()]){var d=this.adEventListObj()[i.type()].length;var j=0;var e=0;do{i.target(c);if(g){i.currentTarget(g)}else{i.currentTarget(g)}if(f){i.data().url=f}this.adEventListObj()[i.type()][e](i);if(this.adEventListObj()[i.type()]){j=d-this.adEventListObj()[i.type()].length;d=this.adEventListObj()[i.type()].length}else{d=0}if(j==0){e++}}while(e<d)}if(f){var h=new URLRequest(f);h.load()}};c.addPrivacyInfo=function(d,g,f){var e=new PrivacyInfo();e.adServer=d;e.message=g;e.url=f;this.privacyInfoList().push(e)};c.privacyClickBtn;c.enableAdChoice=function(){if(!this.isPrivacyPanelEnabled()){for(var d=0;d<this.adDomElement().getElementsByTagName("button").length;d++){if(this.adDomElement().getElementsByTagName("button")[0].className=="privacyButton"){}return}this.isAdChoiceEnabled(true);this.privacyClickBtn=document.createElement("button");this.privacyClickBtn.setAttribute("class","privacyButton");this.privacyClickBtn.setAttribute("className","privacyButton");this.privacyClickBtn.innerHTML="Get Info";this.adDomElement().style.position="relative";this.adDomElement().appendChild(this.privacyClickBtn);var e=this;this.privacyClickBtn.onclick=function(){e.showPrivacyInfo()}}};c.disableAdChoice=function(){if(this.isPrivacyPanelEnabled()){if(this.privacyClickBtn){this.isAdChoiceEnabled(false);this.adDomElement().removeChild(this.privacyClickBtn)}}};c.privacyPanel;c.showPrivacyInfo=function(){if(!this.privacyPanel){this.privacyPanel=document.createElement("div");this.privacyPanel.setAttribute("class","privacyPanel");this.privacyPanel.setAttribute("className","privacyPanel");var g=document.createElement("ul");var e=document.createElement("button");var f=this;this.privacyPanel.appendChild(g);this.privacyPanel.appendChild(e);this.adDomElement().appendChild(this.privacyPanel);e.innerHTML="Close";for(var d=0;d<this.privacyInfoList().length;d++){var h=document.createElement("li");privacyClick=function(i){var j=new Object();j.url=i;f.track(new AdEvent(AdEvent.PRIVACY_CLICK,j));window.open(i)};h.innerHTML=this.privacyInfoList()[d].adServer+"<span>"+this.privacyInfoList()[d].message+"<br/><a href=\"javascript:privacyClick('"+this.privacyInfoList()[d].url+'\');" target="_self">Opt Out</a></span>';g.appendChild(h)}this.isPrivacyPanelEnabled(true);e.onclick=function(){f.hidePrivacyInfo()};this.track(new AdEvent(AdEvent.PRIVACY_OPEN))}};c.hidePrivacyInfo=function(){if(this.privacyPanel){this.isPrivacyPanelEnabled(false);this.adDomElement().removeChild(this.privacyPanel);this.privacyPanel=null;this.track(new AdEvent(AdEvent.PRIVACY_CLOSE))}};return c});var ReferencePlayer=(function(d,a,c){var f=new AbstractPlayer(d,a);var b=new DefaultPlayer(d,a);function e(h,g){b[h].apply(f,g);c[h].apply(f,g)}f.addEventListener=function(g,h){e("addEventListener",[g,h,this])};f.removeEventListener=function(g,h){e("removeEventListener",[g,h,this])};f.addTrackingPixel=function(g,h,i){e("addTrackingPixel",[g,h,i,this])};f.removeTrackingPixel=function(g,h){e("removeTrackingPixel",[g,h,this])};f.track=function(i,g,h){e("track",[i,g,h,this])};f.addPrivacyInfo=function(g,i,h){e("addPrivacyInfo",[g,i,h,this])};f.enableAdChoice=function(){if(!c.isAdChoiceEnabled()){c.enableAdChoice.apply(f,[this])}};f.showPrivacyInfo=function(){e("showPrivacyInfo",[this])};f.hidePrivacyInfo=function(){e("hidePrivacyInfo",[this])};return f});var PlayerFactory=(function(g,i,a,c){if(!g){log("Unique ID is required.","AdPlayer");return}function m(){if(i&&!c){if(f(i)){k(AdPlayerManager.isSearching(),j,h,[i,a,h])}else{l(i);if(AdPlayerManager.isSearching()){k(AdPlayerManager.isSearching(),k,h,[document.getElementById(i),d,h,[g,i,a]])}else{k(document.getElementById(i),d,h,[g,i,a])}}}else{if(i&&c){if(f(i)){n(c,a,h)}else{l(i);k(document.getElementById(i),n,h,[c,a,h])}}else{if(!i&&c){i=b();l(i);k(AdPlayerManager.isSearching(),k,h,[document.getElementById(i),n,h,[c,a,h]])}else{if(!i&&!c){i=b();if(f(i)){k(AdPlayerManager.isSearching(),j,h,[i,a,h])}else{l(i);if(AdPlayerManager.isSearching()){k(AdPlayerManager.isSearching(),k,h,[document.getElementById(i),d,h,[g,i,a]])}else{k(document.getElementById(i),d,h,[g,i,a])}}}}}}}function f(p){var o=false;for(var q=0;q<AdPlayerManager.domIdList().length;q++){if(AdPlayerManager.domIdList()[q]==p){o=true;break}}return o}function l(p){for(var o=0;o<AdPlayerManager.domIdList().length;o++){if(AdPlayerManager.domIdList()[o]==p){return}}AdPlayerManager.domIdList().push(p)}function e(p){for(var o=0;o<AdPlayerManager.domIdList().length;o++){if(AdPlayerManager.domIdList()[o]==p){AdPlayerManager.domIdList().splice(o,1);break}}}function d(p,o,r){var q=document.getElementById(o).parentNode;while(!AdPlayerManager.getAdPlayerById(q.id)){q=q.parentNode;parName=q.nodeName.toLowerCase();if((parName=="body")||(parName=="html")){break}}if(q){var s=AdPlayerManager.getAdPlayerById(q.id);if(s){if(r){log("Found player at "+s.adDomElement().id);r(s)}e(o)}else{log("No AdPlayer found after parent search. Creating new player for "+p);r(new DefaultPlayer(p,document.getElementById(o)));e(o)}}}function h(p,o,q){q(new DefaultPlayer(p,document.getElementById(o)))}function k(v,r,u,s){AdPlayerManager.searchCount++;var p=setInterval(o,100);var t=this;var q=0;function o(){q++;if(q==20){clearInterval(p);AdPlayerManager.searchCount--;u.apply(t,s)}if(v){clearInterval(p);AdPlayerManager.searchCount--;r.apply(t,s)}}}function j(p,s,u){AdPlayerManager.searchCount++;console.log("DOM REF PLAYER WIAT!");var q=setInterval(o,100);var t=this;var r=0;function o(){r++;if(r==100){clearInterval(q);console.log("Could not find a player: "+p);AdPlayerManager.searchCount--;u.apply(t,[g,p,a])}if(AdPlayerManager.getAdPlayerById(p)){clearInterval(q);console.log("Found adplayer:"+p);AdPlayerManager.searchCount--;s.apply(t,[AdPlayerManager.getAdPlayerById(p)])}}}function n(u,r,t){AdPlayerManager.searchCount++;var p=setInterval(o,100);var s=this;var q=0;function o(){q++;if(q==100){clearInterval(p);AdPlayerManager.searchCount--;t.apply(s,[g,domRef,a])}if(u){clearInterval(p);AdPlayerManager.searchCount--;if(document.getElementById(i)){r.apply(s,[new ReferencePlayer(g,document.getElementById(i),u)])}else{r.apply(s,[new ReferencePlayer(g,u.adDomElement(),u)])}}}}function b(){var o=new Date().getTime();log('WARNING: No valid referral element specified for "'+g+'". Referral will be created using "document.write"',"parentDomSearch");domId="ref"+o;document.write('<span id="'+domId+'"></span>');return domId}m()});log=function(b,a){if(typeof(console)!=="undefined"&&console!=null){if(a){console.log("AdPlayer("+a+"): "+b)}else{console.log("AdPlayer: "+b)}}};var AdPlayer=(function(g,c,a,e){var f=new AbstractPlayer(g,null);var h=[];var d;f.player=function(){return d};f.adDomElement=function(k){return d.adDomElement(k)};f.adEventListObj=function(){return d.adEventListObj()};f.isLoaded=function(k){return d.isLoaded(k)};f.isPrivacyPanelEnabled=function(k){return d.isPrivacyPanelEnabled(k)};f.adWidth=function(k){return d.adWidth(k)};f.adHeight=function(k){return d.adHeight(k)};f.privacyInfoList=function(){return d.privacyInfoList()};function j(l,k){if(!d){h.push(b(f[l],f,k));return}d[l].apply(f,k)}function b(l,k,m){return function(){l.apply(k,m)}}f.addEventListener=function(k,l){j("addEventListener",[k,l,this])};f.removeEventListener=function(k,l){j("removeEventListener",[k,l,this])};f.addTrackingPixel=function(k,l,m){j("addTrackingPixel",[k,l,m,this])};f.removeTrackingPixel=function(k,l){j("removeTrackingPixel",[k,l,this])};f.track=function(l,k){j("track",[l,k,this])};f.addPrivacyInfo=function(k,m,l){j("addPrivacyInfo",[k,m,l,this])};f.enableAdChoice=function(){j("enableAdChoice",[this])};f.disableAdChoice=function(){j("disableAdChoice",[this])};f.showPrivacyInfo=function(){j("showPrivacyInfo",[this])};f.hidePrivacyInfo=function(){j("hidePrivacyInfo",[this])};function i(){var l=new PlayerFactory(g,c,k,e);function k(m){d=m;AdPlayerManager.addAdPlayer(d);if(a){a(f)}d.track(new AdEvent(AdEvent.INIT),null,f);while(h.length>0){(h.shift())()}}}i();return f})};