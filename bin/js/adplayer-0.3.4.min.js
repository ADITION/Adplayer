if(typeof AdPlayerManager==="undefined"){var PostMessage=(function(){var a={};a.OUTGOING="PostMessage.Outgoing";a.INCOMING="PostMessage.Incoming";a.FUNCTION="PostMessage.Function: ";a.ADEVENT="PostMessage.ADEVENT: ";return a})();var PostMessageManager=(function(){var f={};f.getPlayerByDomSearch=function(i){var g=i.parentNode;while(!AdPlayerManager.getAdPlayerById(g.id)){g=g.parentNode;parName=g.nodeName.toLowerCase();if((parName=="body")||(parName=="html")){break}}if(g){var h=AdPlayerManager.getAdPlayerById(g.id);if(h){return(h)}else{return null}}};f.domRefPlayerWait=function(j,h,k,l,n){AdPlayerManager.searchCount++;var i=setInterval(g,100);var m=this;var o=0;function g(){o++;if(o==100){clearInterval(i);AdPlayerManager.searchCount--}if(j){clearInterval(i);AdPlayerManager.searchCount--;b(m.getPlayerByDomSearch(j),h,k)}}};f.errorFn=function(){};function b(i,n,k){if(i){var h=(new Function("return( "+n+" );"))();var m=h.params.split(",");for(var g=0;g<m.length;g++){switch(h.fn){case"addEventListener":if(unescape(m[g]).match(PostMessage.FUNCTION)){var l=unescape(m[g]).slice(PostMessage.FUNCTION.length);function j(o){var p='{ "postType":"'+PostMessage.INCOMING+'", "uid":"'+h.uid+'", "fn":"'+l+'", "evtType":"'+o.type()+'", "uidName:":"'+h.uidName+'"}';k.contentWindow.postMessage(p,"*")}j.uidName=h.uidName;m[g]=j}break}}switch(h.fn){case"removeEventListener":m.push(h.uidName.toString());break;case"track":adEvtObj=new AdEvent(m[0]);adEvtObj.target(i);adEvtObj.currentTarget(i);i.track(new AdEvent(m[0]),m[1]);return;break;case"addTrackingPixel":break}i[h.fn].apply(i,m)}}function c(g){var h=(new Function("return( "+g.data+" );"))();if(h.postType==PostMessage.OUTGOING){a(g)}else{if(h.postType==PostMessage.INCOMING){e(g)}}}function a(g){for(var h=0;h<document.getElementsByTagName("iframe").length;h++){if(document.getElementsByTagName("iframe")[h].contentWindow==g.source){var j=document.getElementsByTagName("iframe")[h];f.domRefPlayerWait(j,g.data,j,b,f.erroFn);break}}}function e(g){var i=(new Function("return( "+g.data+" );"))();var h=AdPlayerManager.getPlayerByUID(i.uid);switch(i.fn){case"defaultTrackCallBack":break;default:var k=(new Function("return( "+i.fn+" );"))();if(h){var j=new AdEvent(i.evtType);j.target(h);k(j)}break}}function d(){if(window.addEventListener){window.addEventListener("message",c,false)}else{if(window.attachEvent){window.attachEvent("onmessage",c)}}}d();return f});var PrivacyInfo=(function(){var a={};a.adServer="";a.message="";a.url="";return a});var URLRequest=(function(a){var b={};b.url;if(a){b.url=a}b.load=function(){if(b.url){var d=document.createElement("img");d.src=(b.url);d.style.display="none";var c=document.getElementsByTagName("script")[0];log(b.url,"URLRequest");c.parentNode.insertBefore(d,c);c.parentNode.removeChild(d);delete d;delete c}else{log("URLRequest",'Parameter "url" is not defined.')}};return b});function AdEvent(d,f){var b="";this.type=function(g){if(g){b=g}return b};if(d){b=d}var e={};this.currentTarget=function(g){if(g){e=g}return e};var c=new Object();this.data=function(g){if(g){c=g}return c};if(f){c=f}var a;this.target=function(g){if(g){a=g}return a}}var defaultAdEvents=["INIT","LOAD","REMOVE","SHOW","HIDE","PROGRESS","TRACK","COUNT","CLICK","PRIVACY_CLICK","PRIVACY_OPEN","PRIVACY_CLOSE"];AdEvent.list=new Object();AdEvent.check=function(b){for(var a in AdEvent.list){if(AdEvent.list[a]==b){return true}}log("Ad Event type is not valid: "+b,"AdEvent");return false};AdEvent.map=function(a){AdEvent.list[a]="AdEvent."+a;AdEvent[a]="AdEvent."+a};for(var dae=0;dae<defaultAdEvents.length;dae++){AdEvent.map(defaultAdEvents[dae])}AbstractPlayer=(function(h,l){var f={};var k;f.uid=function(m){if(m){k=m}return k};f.uid(h);var g;f.adDomElement=function(m){if(m){g=m}return g};f.adDomElement(l);var d=new Object();f.adEventListObj=function(){return d};var c=false;f.isLoaded=function(m){if(m){c=m}return c};var i=false;f.isPrivacyPanelEnabled=function(m){if(m){i=m}return i};var j=false;f.isAdChoiceEnabled=function(m){if(m){j=m}return j};var b=null;f.adWidth=function(m){if(m){b=m;this.adDomElement().style.width=b+"px"}return b};var a=null;f.adHeight=function(m){if(m){a=m;this.adDomElement().style.height=a+"px"}return a};var e=[];f.privacyInfoList=function(){return e};f.addEventListener=function(m,n){};f.removeEventListener=function(m,o,n){};f.addTrackingPixel=function(m,n,o){};f.removeTrackingPixel=function(m,n){};f.track=function(n,m){};f.addPrivacyInfo=function(m,o,n){};f.enableAdChoice=function(){};f.disableAdChoice=function(){};f.showPrivacyInfo=function(){};f.hidePrivacyInfo=function(){};return f});var DefaultPlayer=(function(b,a){var c=new AbstractPlayer(b,a);c.addEventListener=function(d,f){if(!AdEvent.check(d)){return}if(!this.adEventListObj()[d]){this.adEventListObj()[d]=[]}for(var e=0;e<this.adEventListObj()[d].length;e++){if(this.adEventListObj()[d][e]==f){return}}this.adEventListObj()[d].push(f)};c.removeEventListener=function(d,g,e){if(!AdEvent.check(d)){return}if(this.adEventListObj()[d]){for(var f=0;f<this.adEventListObj()[d].length;f++){if(e){if(e==this.adEventListObj()[d][f].uidName){this.adEventListObj()[d].splice(f,1);break}}else{if(this.adEventListObj()[d][f]==g){this.adEventListObj()[d].splice(f,1);break}}}if(this.adEventListObj()[d].length==0){delete this.adEventListObj()[d]}}};c.addTrackingPixel=function(d,e,g){if(!AdEvent.check(d)){return}if(g===undefined){g=true}if(e){function f(h){var i=new URLRequest(e);i.load();if(!g){c.removeEventListener(h.type(),f)}}f.url=e;f.repeat=g;this.addEventListener(d,f,false)}else{log("Parameter 'url' must be defined","addTrackingEvent")}};c.removeTrackingPixel=function(d,g){if(!AdEvent.check(d)){return}if(this.adEventListObj()[d]){var e=this.adEventListObj()[d].length;var h=0;var f=0;do{if(g){if(this.adEventListObj()[d][f].name=="defaultTrackCallBack"){if(this.adEventListObj()[d][f].url){if(this.adEventListObj()[d][f].url==g){this.adEventListObj()[d].splice(f,1);if(this.adEventListObj()[d].length==0){delete this.adEventListObj()[d];return}}}}}if(this.adEventListObj()[d]){h=e-this.adEventListObj()[d].length;e=this.adEventListObj()[d].length}else{e=0}if(h==0){f++}}while(f<e)}};c.track=function(i,f,g){if(!AdEvent.check(i.type())){return}if(this.adEventListObj()[i.type()]){var d=this.adEventListObj()[i.type()].length;var j=0;var e=0;do{i.target(c);if(g){i.currentTarget(g)}else{i.currentTarget(g)}if(f){i.data().url=f}this.adEventListObj()[i.type()][e](i);if(this.adEventListObj()[i.type()]){j=d-this.adEventListObj()[i.type()].length;d=this.adEventListObj()[i.type()].length}else{d=0}if(j==0){e++}}while(e<d)}if(f){var h=new URLRequest(f);h.load()}};c.addPrivacyInfo=function(d,g,f){var e=new PrivacyInfo();e.adServer=d;e.message=g;e.url=f;this.privacyInfoList().push(e)};c.privacyClickBtn;c.enableAdChoice=function(){if(!this.isPrivacyPanelEnabled()){for(var d=0;d<this.adDomElement().getElementsByTagName("button").length;d++){if(this.adDomElement().getElementsByTagName("button")[0].className=="privacyButton"){}return}this.isAdChoiceEnabled(true);this.privacyClickBtn=document.createElement("button");this.privacyClickBtn.setAttribute("class","privacyButton");if(AdPlayerManager.isIE){this.privacyClickBtn.setAttribute("className","privacyButton")}this.privacyClickBtn.innerHTML="Get Info";this.adDomElement().style.position="relative";this.adDomElement().appendChild(this.privacyClickBtn);var e=this;this.privacyClickBtn.onclick=function(){e.showPrivacyInfo()}}};c.disableAdChoice=function(){if(this.isPrivacyPanelEnabled()){if(this.privacyClickBtn){this.isAdChoiceEnabled(false);this.adDomElement().removeChild(this.privacyClickBtn)}}};c.privacyPanel;c.showPrivacyInfo=function(){if(!this.privacyPanel){this.privacyPanel=document.createElement("div");this.privacyPanel.setAttribute("class","privacyPanel");this.privacyPanel.setAttribute("className","privacyPanel");var g=document.createElement("ul");var e=document.createElement("button");var f=this;this.privacyPanel.appendChild(g);this.privacyPanel.appendChild(e);this.adDomElement().appendChild(this.privacyPanel);e.innerHTML="Close";for(var d=0;d<this.privacyInfoList().length;d++){var h=document.createElement("li");privacyClick=function(i){var j=new Object();j.url=i;f.track(new AdEvent(AdEvent.PRIVACY_CLICK,j));window.open(i)};h.innerHTML=this.privacyInfoList()[d].adServer+"<span>"+this.privacyInfoList()[d].message+"<br/><a href=\"javascript:privacyClick('"+this.privacyInfoList()[d].url+'\');" target="_self">Opt Out</a></span>';g.appendChild(h)}this.isPrivacyPanelEnabled(true);e.onclick=function(){f.hidePrivacyInfo()};this.track(new AdEvent(AdEvent.PRIVACY_OPEN))}};c.hidePrivacyInfo=function(){if(this.privacyPanel){this.isPrivacyPanelEnabled(false);this.adDomElement().removeChild(this.privacyPanel);this.privacyPanel=null;this.track(new AdEvent(AdEvent.PRIVACY_CLOSE))}};return c});var ReferencePlayer=(function(d,a,c){var f=new AbstractPlayer(d,a);var b=new DefaultPlayer(d,a);function e(h,g){b[h].apply(f,g);c[h].apply(f,g)}f.addEventListener=function(g,h){e("addEventListener",[g,h,this])};f.removeEventListener=function(g,i,h){e("removeEventListener",[g,i,h,this])};f.addTrackingPixel=function(g,h,i){e("addTrackingPixel",[g,h,i,this])};f.removeTrackingPixel=function(g,h){e("removeTrackingPixel",[g,h,this])};f.track=function(i,g,h){e("track",[i,g,h,this])};f.addPrivacyInfo=function(g,i,h){e("addPrivacyInfo",[g,i,h,this])};f.enableAdChoice=function(){if(!c.isAdChoiceEnabled()){c.enableAdChoice.apply(f,[this])}};f.showPrivacyInfo=function(){e("showPrivacyInfo",[this])};f.hidePrivacyInfo=function(){e("hidePrivacyInfo",[this])};return f});var IframePlayer=(function(d,a){var g=new AbstractPlayer(d,a);var c=new DefaultPlayer(d,a);function f(i,h){c[i].apply(g,h)}function b(i,j,h){jsonString='{ "postType":"'+PostMessage.OUTGOING+'", "uid":"'+d+'", "fn":"'+i+'", "params":"'+j.toString()+'" ';if(h){jsonString+=(", "+h)}jsonString+="}";parent.postMessage(jsonString,"*")}function e(h){var i=h.replace(/\s+/g," ");if(i.search(/function /i,"")==0){funcStartPos=i.search(/function /i,"");funcEndPos=0;funcLen=9;funcEndPos=funcStartPos+funcLen;startPos=funcEndPos;endPos=i.search(/\(/)}else{if(i.search(/var /i,"")==0){varLen=4;startPos=4}else{varLen=0;startPos=0}endPos=i.search(/\=/)}funcName=i.substring(startPos,endPos).replace(/\s+/g,"");return escape(PostMessage.FUNCTION+funcName)}g.addEventListener=function(h,i){i.uidName=d+new Date().getTime();f("addEventListener",[h,i,this]);b("addEventListener",[h,e(i.toString())],'"uidName":"'+i.uidName+'"')};g.removeEventListener=function(h,j,i){f("removeEventListener",[h,j,i,this]);b("removeEventListener",[h,e(j.toString())],'"uidName":"'+j.uidName+'"')};g.addTrackingPixel=function(h,i,k){if(!AdEvent.check(h)){return}if(k===undefined){k=true}if(i){function j(l){var m=new URLRequest(i);m.load();if(!k){g.removeEventListener(l.type(),j)}}j.url=i;j.repeat=k;this.addEventListener(h,j,false)}else{log("Parameter 'url' must be defined","addTrackingEvent")}};g.removeTrackingPixel=function(h,k){if(!AdEvent.check(h)){return}if(this.adEventListObj()[h]){var i=this.adEventListObj()[h].length;var l=0;var j=0;do{if(k){if(this.adEventListObj()[h][j].name=="defaultTrackCallBack"){if(this.adEventListObj()[h][j].url){if(this.adEventListObj()[h][j].url==k){this.adEventListObj()[h].splice(j,1);if(this.adEventListObj()[h].length==0){delete this.adEventListObj()[h];return}}}}}if(this.adEventListObj()[h]){l=i-this.adEventListObj()[h].length;i=this.adEventListObj()[h].length}else{i=0}if(l==0){j++}}while(j<i)}};g.track=function(j,h,i){f("track",[j,h,i,this]);b("track",[j.type(),h,"null"])};g.addPrivacyInfo=function(h,j,i){f("addPrivacyInfo",[h,j,i,this]);b("addPrivacyInfo",[h,j,i])};g.enableAdChoice=function(){b("enableAdChoice",[])};g.showPrivacyInfo=function(){f("showPrivacyInfo",[this]);b("showPrivacyInfo",[null])};g.hidePrivacyInfo=function(){f("hidePrivacyInfo",[this]);b("hidePrivacyInfo",[null])};return g});var PlayerFactory=(function(g,i,a,c){if(!g){log("Unique ID is required.","AdPlayer");return}var l=(window.location!=window.parent.location)?true:false;function n(){if(i&&!c){if(f(i)){k(AdPlayerManager.isSearching(),j,h,[i,a,h])}else{m(i);if(AdPlayerManager.isSearching()){k(AdPlayerManager.isSearching(),k,h,[document.getElementById(i),d,h,[g,i,a]])}else{k(document.getElementById(i),d,h,[g,i,a])}}}else{if(i&&c){if(f(i)){o(c,a,h)}else{m(i);k(document.getElementById(i),o,h,[c,a,h])}}else{if(!i&&c){i=b();m(i);k(AdPlayerManager.isSearching(),k,h,[document.getElementById(i),o,h,[c,a,h]])}else{if(!i&&!c){i=b();if(f(i)){k(AdPlayerManager.isSearching(),j,h,[i,a,h])}else{m(i);if(AdPlayerManager.isSearching()){k(AdPlayerManager.isSearching(),k,h,[document.getElementById(i),d,h,[g,i,a]])}else{k(document.getElementById(i),d,h,[g,i,a])}}}}}}}function f(q){var p=false;for(var r=0;r<AdPlayerManager.domIdList().length;r++){if(AdPlayerManager.domIdList()[r]==q){p=true;break}}return p}function m(q){for(var p=0;p<AdPlayerManager.domIdList().length;p++){if(AdPlayerManager.domIdList()[p]==q){return}}AdPlayerManager.domIdList().push(q)}function e(q){for(var p=0;p<AdPlayerManager.domIdList().length;p++){if(AdPlayerManager.domIdList()[p]==q){AdPlayerManager.domIdList().splice(p,1);break}}}function d(q,p,s){var r=document.getElementById(p).parentNode;while(!AdPlayerManager.getAdPlayerById(r.id)){r=r.parentNode;parName=r.nodeName.toLowerCase();if((parName=="body")||(parName=="html")){break}}if(r){var t=AdPlayerManager.getAdPlayerById(r.id);if(t){if(s){s(t)}e(p)}else{if(l){s(new IframePlayer(q,document.getElementById(i)))}else{s(new DefaultPlayer(q,document.getElementById(p)))}e(p)}}}function h(q,p,r){r(new DefaultPlayer(q,document.getElementById(p)))}function k(w,s,v,t){AdPlayerManager.searchCount++;var q=setInterval(p,100);var u=this;var r=0;function p(){r++;if(r==20){clearInterval(q);AdPlayerManager.searchCount--;v.apply(u,t)}if(w){clearInterval(q);AdPlayerManager.searchCount--;s.apply(u,t)}}}function j(q,t,v){AdPlayerManager.searchCount++;var r=setInterval(p,100);var u=this;var s=0;function p(){s++;if(s==100){clearInterval(r);AdPlayerManager.searchCount--;v.apply(u,[g,q,a])}if(AdPlayerManager.getAdPlayerById(q)){clearInterval(r);AdPlayerManager.searchCount--;t.apply(u,[AdPlayerManager.getAdPlayerById(q)])}}}function o(v,s,u){AdPlayerManager.searchCount++;var q=setInterval(p,100);var t=this;var r=0;function p(){r++;if(r==100){clearInterval(q);AdPlayerManager.searchCount--;u.apply(t,[g,domRef,a])}if(v){clearInterval(q);AdPlayerManager.searchCount--;if(document.getElementById(i)){s.apply(t,[new ReferencePlayer(g,document.getElementById(i),v)])}else{s.apply(t,[new ReferencePlayer(g,v.adDomElement(),v)])}}}}function b(){var p=new Date().getTime();log('WARNING: No valid referral element specified for "'+g+'". Referral will be created using "document.write"',"parentDomSearch");domId="ref"+p;document.write('<span id="'+domId+'"></span>');return domId}n()});log=function(b,a){if(typeof(console)!=="undefined"&&console!=null){if(a){console.log("AdPlayer("+a+"): "+b)}else{console.log("AdPlayer: "+b)}}};var AdPlayer=(function(g,c,a,e){var f=new AbstractPlayer(g,null);var h=[];var d;f.player=function(){return d};f.adDomElement=function(k){return d.adDomElement(k)};f.adEventListObj=function(){return d.adEventListObj()};f.isLoaded=function(k){return d.isLoaded(k)};f.isPrivacyPanelEnabled=function(k){return d.isPrivacyPanelEnabled(k)};f.adWidth=function(k){return d.adWidth(k)};f.adHeight=function(k){return d.adHeight(k)};f.privacyInfoList=function(){return d.privacyInfoList()};function j(l,k){if(!d){h.push(b(f[l],f,k));return}d[l].apply(f,k)}function b(l,k,m){return function(){l.apply(k,m)}}f.addEventListener=function(k,l){j("addEventListener",[k,l,this])};f.removeEventListener=function(k,m,l){j("removeEventListener",[k,m,l,this])};f.addTrackingPixel=function(k,l,m){j("addTrackingPixel",[k,l,m,this])};f.removeTrackingPixel=function(k,l){j("removeTrackingPixel",[k,l,this])};f.track=function(l,k){j("track",[l,k,this])};f.addPrivacyInfo=function(k,m,l){j("addPrivacyInfo",[k,m,l,this])};f.enableAdChoice=function(){j("enableAdChoice",[this])};f.disableAdChoice=function(){j("disableAdChoice",[this])};f.showPrivacyInfo=function(){j("showPrivacyInfo",[this])};f.hidePrivacyInfo=function(){j("hidePrivacyInfo",[this])};function i(){var l=new PlayerFactory(g,c,k,e);function k(m){d=m;AdPlayerManager.addAdPlayer(d);if(a){a(f)}d.track(new AdEvent(AdEvent.INIT),null,f);while(h.length>0){(h.shift())()}}}i();return f});var AdPlayerManager=(function(){var g={};var a=[];var c=[];var e=[];g.isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;g.isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;g.isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;g.isFF=(navigator.userAgent.indexOf("Firefox")!=-1)?true:false;g.list=function(){return a};var b=[];g.domIdList=function(){return b};g.searchCount=0;g.isSearching=function(h){if(g.searchCount==0){return false}else{return true}};g.addAdPlayer=function(j){for(var h=0;h<a.length;h++){if(a[h].adDomElement().id==j.adDomElement().id){return}}a.push(j);d(j)};g.register=function(h){c.push(h)};g.unregister=function(j){for(var h=0;h<c.length;h++){if(c[h]==j){c.shift(h,1);return}}};g.getAdPlayerById=function(j){for(var h=0;h<a.length;h++){if(a[h].adDomElement()){if(a[h].adDomElement().id==j){return a[h]}}else{log("DOM element is not properly specified.","getPlayerById")}}return null};g.getPlayerByDomElement=function(j){for(var h=0;h<a.length;h++){if(a[h].adDomElement()){if(a[h].adDomElement()==j){return a[h]}}else{log("DOM element is not properly specified.","getPlayerByDomElement")}}return null};g.getPlayerByUID=function(j){for(var h=0;h<a.length;h++){if(a[h].uid()){if(a[h].uid()==j){return a[h]}}}return null};function d(j){var h=c.length;var k=0;var i=0;do{if(typeof c[i]=="function"){c[i](j)}if(c>0){k=h-c.length;h=c.length}else{h=0}if(k==0){i++}}while(i<h)}function f(){var h=new PostMessageManager()}f();return g})()};