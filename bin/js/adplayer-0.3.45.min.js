if(typeof AdPlayerManager==="undefined"){var PostMessage=(function(){var a={};a.OUTGOING="PostMessage.Outgoing";a.INCOMING="PostMessage.Incoming";a.FUNCTION="PostMessage.Function: ";a.ADEVENT="PostMessage.ADEVENT: ";return a})();var PostMessageManager=(function(){var f={};f.getPlayerByDomSearch=function(i){AdPlayerManager.searchCount++;var g=i.parentNode;while(!AdPlayerManager.getAdPlayerById(g.id)){g=g.parentNode;parName=g.nodeName.toLowerCase();if((parName=="body")||(parName=="html")){break}}if(g){var h=AdPlayerManager.getAdPlayerById(g.id);if(h){AdPlayerManager.searchCount--;return(h)}else{AdPlayerManager.searchCount--;return null}}};f.domRefPlayerWait=function(j,h,k,l,n){AdPlayerManager.searchCount++;var i=setInterval(g,100);var m=this;var o=0;function g(){o++;if(o==100){clearInterval(i);AdPlayerManager.searchCount--}if(j){clearInterval(i);var r=(new Function("return( "+h+" );"))();var q=m.getPlayerByDomSearch(j);if(q){if(r.fn=="iframePlayerVerify"){var p='{ "postType":"'+PostMessage.INCOMING+'", "uid":"'+r.uid+'", "fn":"iframePlayerVerify", "params":"true" }';k.contentWindow.postMessage(p,"*");return}b(q,h,k)}else{var p='{ "postType":"'+PostMessage.INCOMING+'", "uid":"'+r.uid+'", "fn":"iframePlayerVerify", "params":"false" }';j.contentWindow.postMessage(p,"*")}AdPlayerManager.searchCount--}}};f.errorFn=function(){};function b(i,n,k){if(i){var h=(new Function("return( "+n+" );"))();var m=h.params.split(",");for(var g=0;g<m.length;g++){switch(h.fn){case"addEventListener":if(unescape(m[g]).match(PostMessage.FUNCTION)){var l=unescape(m[g]).slice(PostMessage.FUNCTION.length);function j(p){var o='{ "postType":"'+PostMessage.INCOMING+'", "uid":"'+h.uid+'", "fn":"'+l+'", "evtType":"'+p.type()+'", "uidName:":"'+h.uidName+'"}';k.contentWindow.postMessage(o,"*")}j.uidName=h.uidName;m[g]=j}break}}switch(h.fn){case"removeEventListener":m.push(h.uidName.toString());break;case"track":adEvtObj=new AdEvent(m[0]);adEvtObj.target(i);adEvtObj.currentTarget(i);i.track(new AdEvent(m[0]),m[1]);return;break}i[h.fn].apply(i,m)}}function c(g){var h=(new Function("return( "+g.data+" );"))();if(h.postType==PostMessage.OUTGOING){a(g)}else{if(h.postType==PostMessage.INCOMING){e(g)}}}function a(g){for(var h=0;h<document.getElementsByTagName("iframe").length;h++){if(document.getElementsByTagName("iframe")[h].contentWindow==g.source){var j=document.getElementsByTagName("iframe")[h];f.domRefPlayerWait(j,g.data,j,b,f.erroFn);break}}}function e(g){var k=(new Function("return( "+g.data+" );"))();switch(k.fn){case"iframePlayerVerify":var n;for(var j=0;j<AdPlayerManager.factoryList().length;j++){if(AdPlayerManager.factoryList()[j].uid()==k.uid){n=AdPlayerManager.factoryList()[j];break}}if(n){n.setIframePlayerType(k)}return;break;case"defaultTrackCallBack":break;default:var m=(new Function("return( "+k.fn+" );"))();var h=AdPlayerManager.getPlayerByUID(k.uid);if(h){var l=new AdEvent(k.evtType);l.target(h);m(l)}break}}function d(){if(window.addEventListener){window.addEventListener("message",c,false)}else{if(window.attachEvent){window.attachEvent("onmessage",c)}}}d();return f});var PrivacyInfo=(function(){var a={};a.adServer="";a.message="";a.url="";return a});var URLRequest=(function(a){var b={};b.url;if(a){b.url=a}b.load=function(){if(b.url){var d=document.createElement("img");d.src=(b.url);d.style.display="none";var c=document.getElementsByTagName("script")[0];log(b.url,"URLRequest");c.parentNode.insertBefore(d,c);c.parentNode.removeChild(d);delete d;delete c}else{log("URLRequest",'Parameter "url" is not defined.')}};return b});function AdEvent(d,f){var b="";this.type=function(g){if(g){b=g}return b};if(d){b=d}var e={};this.currentTarget=function(g){if(g){e=g}return e};var c=new Object();this.data=function(g){if(g){c=g}return c};if(f){c=f}var a;this.target=function(g){if(g){a=g}return a}}var defaultAdEvents=["INIT","LOAD","REMOVE","SHOW","HIDE","PROGRESS","TRACK","COUNT","CLICK","PRIVACY_CLICK","PRIVACY_OPEN","PRIVACY_CLOSE"];AdEvent.list=new Object();AdEvent.check=function(b){for(var a in AdEvent.list){if(AdEvent.list[a]==b){return true}}log("Ad Event type is not valid: "+b,"AdEvent");return false};AdEvent.map=function(a){AdEvent.list[a]="AdEvent."+a;AdEvent[a]="AdEvent."+a};for(var dae=0;dae<defaultAdEvents.length;dae++){AdEvent.map(defaultAdEvents[dae])}AbstractPlayer=(function(h,l){var f={};var k;f.uid=function(m){if(m){k=m}return k};f.uid(h);var g;f.adDomElement=function(m){if(m){g=m}return g};f.adDomElement(l);var d=new Object();f.adEventListObj=function(){return d};var c=false;f.isLoaded=function(m){if(m){c=m}return c};var i=false;f.isPrivacyPanelEnabled=function(m){if(m){i=m}return i};var j=false;f.isAdChoiceEnabled=function(m){if(m){j=m}return j};var b=null;f.adWidth=function(m){if(m){b=m;this.adDomElement().style.width=b+"px"}return b};var a=null;f.adHeight=function(m){if(m){a=m;this.adDomElement().style.height=a+"px"}return a};var e=[];f.privacyInfoList=function(){return e};f.addEventListener=function(m,n){};f.removeEventListener=function(m,o,n){};f.addTrackingPixel=function(m,n,o){};f.removeTrackingPixel=function(m,n){};f.track=function(n,m){};f.addPrivacyInfo=function(m,o,n){};f.enableAdChoice=function(){};f.disableAdChoice=function(){};f.showPrivacyInfo=function(){};f.hidePrivacyInfo=function(){};return f});var DefaultPlayer=(function(b,a){var c=new AbstractPlayer(b,a);c.addEventListener=function(d,f){if(!AdEvent.check(d)){return}if(!this.adEventListObj()[d]){this.adEventListObj()[d]=[]}for(var e=0;e<this.adEventListObj()[d].length;e++){if(this.adEventListObj()[d][e]==f){return}}this.adEventListObj()[d].push(f)};c.removeEventListener=function(d,g,e){if(!AdEvent.check(d)){return}if(this.adEventListObj()[d]){for(var f=0;f<this.adEventListObj()[d].length;f++){if(e){if(e==this.adEventListObj()[d][f].uidName){this.adEventListObj()[d].splice(f,1);break}}else{if(this.adEventListObj()[d][f]==g){this.adEventListObj()[d].splice(f,1);break}}}if(this.adEventListObj()[d].length==0){delete this.adEventListObj()[d]}}};c.addTrackingPixel=function(d,e,g){if(!AdEvent.check(d)){return}if(g===undefined){g=true}if(e){function f(h){var i=new URLRequest(e);i.load();if(!g){c.removeEventListener(h.type(),f)}}f.url=e;f.repeat=g;this.addEventListener(d,f,false)}else{log("Parameter 'url' must be defined","addTrackingEvent")}};c.removeTrackingPixel=function(d,g){if(!AdEvent.check(d)){return}if(this.adEventListObj()[d]){var e=this.adEventListObj()[d].length;var h=0;var f=0;do{if(g){if(this.adEventListObj()[d][f].name=="defaultTrackCallBack"){if(this.adEventListObj()[d][f].url){if(this.adEventListObj()[d][f].url==g){this.adEventListObj()[d].splice(f,1);if(this.adEventListObj()[d].length==0){delete this.adEventListObj()[d];return}}}}}if(this.adEventListObj()[d]){h=e-this.adEventListObj()[d].length;e=this.adEventListObj()[d].length}else{e=0}if(h==0){f++}}while(f<e)}};c.track=function(i,f,g){if(!AdEvent.check(i.type())){return}if(this.adEventListObj()[i.type()]){var d=this.adEventListObj()[i.type()].length;var j=0;var e=0;do{i.target(c);if(g){i.currentTarget(g)}else{i.currentTarget(g)}if(f){i.data().url=f}this.adEventListObj()[i.type()][e](i);if(this.adEventListObj()[i.type()]){j=d-this.adEventListObj()[i.type()].length;d=this.adEventListObj()[i.type()].length}else{d=0}if(j==0){e++}}while(e<d)}if(f){var h=new URLRequest(f);h.load()}};c.addPrivacyInfo=function(d,g,f){var e=new PrivacyInfo();e.adServer=d;e.message=g;e.url=f;this.privacyInfoList().push(e)};c.privacyClickBtn;c.enableAdChoice=function(){if(!this.isPrivacyPanelEnabled()){for(var d=0;d<this.adDomElement().getElementsByTagName("button").length;d++){if(this.adDomElement().getElementsByTagName("button")[0].className=="privacyButton"){}return}this.isAdChoiceEnabled(true);this.privacyClickBtn=document.createElement("button");this.privacyClickBtn.setAttribute("class","privacyButton");if(AdPlayerManager.isIE){this.privacyClickBtn.setAttribute("className","privacyButton")}this.privacyClickBtn.innerHTML="Get Info";this.adDomElement().style.position="relative";this.adDomElement().appendChild(this.privacyClickBtn);var e=this;this.privacyClickBtn.onclick=function(){e.showPrivacyInfo()}}};c.disableAdChoice=function(){if(this.privacyClickBtn){this.isAdChoiceEnabled(false);this.adDomElement().removeChild(this.privacyClickBtn)}};c.privacyPanel;c.showPrivacyInfo=function(){if(!this.privacyPanel){this.privacyPanel=document.createElement("div");this.privacyPanel.setAttribute("class","privacyPanel");this.privacyPanel.setAttribute("className","privacyPanel");var g=document.createElement("ul");var e=document.createElement("button");var f=this;this.privacyPanel.appendChild(g);this.privacyPanel.appendChild(e);this.adDomElement().appendChild(this.privacyPanel);e.innerHTML="Close";for(var d=0;d<this.privacyInfoList().length;d++){var h=document.createElement("li");privacyClick=function(i){var j=new Object();j.url=i;f.track(new AdEvent(AdEvent.PRIVACY_CLICK,j));window.open(i)};h.innerHTML=this.privacyInfoList()[d].adServer+"<span>"+this.privacyInfoList()[d].message+"<br/><a href=\"javascript:privacyClick('"+this.privacyInfoList()[d].url+'\');" target="_self">Opt Out</a></span>';g.appendChild(h)}this.isPrivacyPanelEnabled(true);e.onclick=function(){f.hidePrivacyInfo()};this.track(new AdEvent(AdEvent.PRIVACY_OPEN))}};c.hidePrivacyInfo=function(){if(this.privacyPanel){this.isPrivacyPanelEnabled(false);this.adDomElement().removeChild(this.privacyPanel);this.privacyPanel=null;this.track(new AdEvent(AdEvent.PRIVACY_CLOSE))}};return c});var ReferencePlayer=(function(d,a,c){var f=new AbstractPlayer(d,a);var b=new DefaultPlayer(d,a);function e(h,g){b[h].apply(f,g);c[h].apply(f,g)}f.addEventListener=function(g,h){e("addEventListener",[g,h,this])};f.removeEventListener=function(g,i,h){e("removeEventListener",[g,i,h,this])};f.addTrackingPixel=function(g,h,i){e("addTrackingPixel",[g,h,i,this])};f.removeTrackingPixel=function(g,h){e("removeTrackingPixel",[g,h,this])};f.track=function(i,g,h){e("track",[i,g,h,this])};f.addPrivacyInfo=function(g,i,h){e("addPrivacyInfo",[g,i,h,this])};f.enableAdChoice=function(){if(!c.isAdChoiceEnabled()){c.enableAdChoice.apply(f,[this])}};f.showPrivacyInfo=function(){e("showPrivacyInfo",[this])};f.hidePrivacyInfo=function(){e("hidePrivacyInfo",[this])};return f});var IframePlayer=(function(d,a){var g=new AbstractPlayer(d,a);var c=new DefaultPlayer(d,a);function f(i,h){c[i].apply(g,h)}function b(i,j,h){jsonString='{ "postType":"'+PostMessage.OUTGOING+'", "uid":"'+d+'", "fn":"'+i+'", "params":"'+j.toString()+'" ';if(h){jsonString+=(", "+h)}jsonString+="}";parent.postMessage(jsonString,"*")}function e(h){var i=h.replace(/\s+/g," ");if(i.search(/function /i,"")==0){funcStartPos=i.search(/function /i,"");funcEndPos=0;funcLen=9;funcEndPos=funcStartPos+funcLen;startPos=funcEndPos;endPos=i.search(/\(/)}else{if(i.search(/var /i,"")==0){varLen=4;startPos=4}else{varLen=0;startPos=0}endPos=i.search(/\=/)}funcName=i.substring(startPos,endPos).replace(/\s+/g,"");return escape(PostMessage.FUNCTION+funcName)}g.addEventListener=function(h,i){i.uidName=d+new Date().getTime();f("addEventListener",[h,i,this]);b("addEventListener",[h,e(i.toString())],'"uidName":"'+i.uidName+'"')};g.removeEventListener=function(h,j,i){f("removeEventListener",[h,j,i,this]);b("removeEventListener",[h,e(j.toString())],'"uidName":"'+j.uidName+'"')};g.addTrackingPixel=function(h,i,k){if(!AdEvent.check(h)){return}if(k===undefined){k=true}if(i){function j(l){var m=new URLRequest(i);m.load();if(!k){g.removeEventListener(l.type(),j)}}j.url=i;j.repeat=k;this.addEventListener(h,j,false)}else{log("Parameter 'url' must be defined","addTrackingEvent")}};g.removeTrackingPixel=function(h,k){if(!AdEvent.check(h)){return}if(this.adEventListObj()[h]){var i=this.adEventListObj()[h].length;var l=0;var j=0;do{if(k){if(this.adEventListObj()[h][j].name=="defaultTrackCallBack"){if(this.adEventListObj()[h][j].url){if(this.adEventListObj()[h][j].url==k){this.adEventListObj()[h].splice(j,1);if(this.adEventListObj()[h].length==0){delete this.adEventListObj()[h];return}}}}}if(this.adEventListObj()[h]){l=i-this.adEventListObj()[h].length;i=this.adEventListObj()[h].length}else{i=0}if(l==0){j++}}while(j<i)}};g.track=function(j,h,i){f("track",[j,h,i,this]);b("track",[j.type(),h,"null"])};g.addPrivacyInfo=function(h,j,i){f("addPrivacyInfo",[h,j,i,this]);b("addPrivacyInfo",[h,j,i])};g.disableAdChoice=function(){f("disableAdChoice",[])};g.enableAdChoice=function(){f("enableAdChoice",[]);b("enableAdChoice",[])};g.showPrivacyInfo=function(){f("showPrivacyInfo",[this]);b("showPrivacyInfo",[null])};g.hidePrivacyInfo=function(){f("hidePrivacyInfo",[this]);b("hidePrivacyInfo",[null])};return g});var PlayerFactory=(function(h,j,a,c){var g={};if(!h){log("Unique ID is required.","AdPlayer");return}var m=(window.location!=window.parent.location)?true:false;function o(){if(j&&!c){if(f(j)){l(AdPlayerManager.isSearching(),k,i,[j,a,i])}else{n(j);if(AdPlayerManager.isSearching()){l(AdPlayerManager.isSearching(),l,i,[document.getElementById(j),d,i,[h,j,a]])}else{l(document.getElementById(j),d,i,[h,j,a])}}}else{if(j&&c){if(f(j)){p(c,a,i)}else{n(j);l(document.getElementById(j),p,i,[c,a,i])}}else{if(!j&&c){j=b();n(j);l(AdPlayerManager.isSearching(),l,i,[document.getElementById(j),p,i,[c,a,i]])}else{if(!j&&!c){j=b();if(f(j)){l(AdPlayerManager.isSearching(),k,i,[j,a,i])}else{n(j);if(AdPlayerManager.isSearching()){l(AdPlayerManager.isSearching(),l,i,[document.getElementById(j),d,i,[h,j,a]])}else{l(document.getElementById(j),d,i,[h,j,a])}}}}}}}function f(r){var q=false;for(var s=0;s<AdPlayerManager.domIdList().length;s++){if(AdPlayerManager.domIdList()[s]==r){q=true;break}}return q}function n(r){for(var q=0;q<AdPlayerManager.domIdList().length;q++){if(AdPlayerManager.domIdList()[q]==r){return}}AdPlayerManager.domIdList().push(r)}function e(r){for(var q=0;q<AdPlayerManager.domIdList().length;q++){if(AdPlayerManager.domIdList()[q]==r){AdPlayerManager.domIdList().splice(q,1);break}}}function d(t,s,v){AdPlayerManager.searchCount++;var u=document.getElementById(s).parentNode;while(!AdPlayerManager.getAdPlayerById(u.id)){u=u.parentNode;parName=u.nodeName.toLowerCase();if((parName=="body")||(parName=="html")){break}}if(u){var w=AdPlayerManager.getAdPlayerById(u.id);if(w){if(v){log("Found player at "+w.adDomElement().id);AdPlayerManager.searchCount--;v(w)}e(s)}else{log("No AdPlayer found after parent search. Creating new player for "+t);if(m){AdPlayerManager.searchCount--;var r=new IframePlayer(t,document.getElementById(s));v(r);var x=t+new Date().getTime();g.uid=function(){return x};AdPlayerManager.factoryList().push(g);var q='{ "postType":"'+PostMessage.OUTGOING+'", "uid":"'+g.uid()+'", "fn":"iframePlayerVerify"}';parent.postMessage(q,"*");g.setIframePlayerType=function(z){AdPlayerManager.searchCount--;for(var y=0;y<AdPlayerManager.list().length;y++){if(AdPlayerManager.list()[y].uid()==g.uid()){AdPlayerManager.list().splice(y,1);break}}if(z.params=="true"){r.disableAdChoice()}}}else{AdPlayerManager.searchCount--;v(new DefaultPlayer(t,document.getElementById(s)))}e(s)}}}function i(r,q,s){s(new DefaultPlayer(r,document.getElementById(q)))}function l(x,t,w,u){AdPlayerManager.searchCount++;var r=setInterval(q,100);var v=this;var s=0;function q(){s++;if(s==20){clearInterval(r);AdPlayerManager.searchCount--;w.apply(v,u)}if(x){clearInterval(r);AdPlayerManager.searchCount--;t.apply(v,u)}}}function k(r,u,w){AdPlayerManager.searchCount++;var s=setInterval(q,100);var v=this;var t=0;function q(){t++;if(t==100){clearInterval(s);AdPlayerManager.searchCount--;w.apply(v,[h,r,a])}if(AdPlayerManager.getAdPlayerById(r)){clearInterval(s);AdPlayerManager.searchCount--;u.apply(v,[AdPlayerManager.getAdPlayerById(r)])}}}function p(w,t,v){AdPlayerManager.searchCount++;var r=setInterval(q,100);var u=this;var s=0;function q(){s++;if(s==100){clearInterval(r);AdPlayerManager.searchCount--;v.apply(u,[h,domRef,a])}if(w){clearInterval(r);AdPlayerManager.searchCount--;if(document.getElementById(j)){t.apply(u,[new ReferencePlayer(h,document.getElementById(j),w)])}else{t.apply(u,[new ReferencePlayer(h,w.adDomElement(),w)])}}}}function b(){var q=new Date().getTime();log('WARNING: No valid referral element specified for "'+h+'". Referral will be created using "document.write"',"parentDomSearch");domId="ref"+q;document.write('<span id="'+domId+'"></span>');return domId}o();return g});log=function(b,a){if(typeof(console)!=="undefined"&&console!=null){if(a){console.log("AdPlayer("+a+"): "+b)}else{console.log("AdPlayer: "+b)}}};var AdPlayer=(function(g,c,a,e){var f=new AbstractPlayer(g,null);var h=[];var d;f.player=function(){return d};f.adDomElement=function(k){return d.adDomElement(k)};f.adEventListObj=function(){return d.adEventListObj()};f.isLoaded=function(k){return d.isLoaded(k)};f.isPrivacyPanelEnabled=function(k){return d.isPrivacyPanelEnabled(k)};f.adWidth=function(k){return d.adWidth(k)};f.adHeight=function(k){return d.adHeight(k)};f.privacyInfoList=function(){return d.privacyInfoList()};function j(l,k){if(!d){h.push(b(f[l],f,k));return}d[l].apply(f,k)}function b(l,k,m){return function(){l.apply(k,m)}}f.addEventListener=function(k,l){j("addEventListener",[k,l,this])};f.removeEventListener=function(k,m,l){j("removeEventListener",[k,m,l,this])};f.addTrackingPixel=function(k,l,m){j("addTrackingPixel",[k,l,m,this])};f.removeTrackingPixel=function(k,l){j("removeTrackingPixel",[k,l,this])};f.track=function(l,k){j("track",[l,k,this])};f.addPrivacyInfo=function(k,m,l){j("addPrivacyInfo",[k,m,l,this])};f.enableAdChoice=function(){j("enableAdChoice",[this])};f.disableAdChoice=function(){j("disableAdChoice",[this])};f.showPrivacyInfo=function(){j("showPrivacyInfo",[this])};f.hidePrivacyInfo=function(){j("hidePrivacyInfo",[this])};function i(){var l=new PlayerFactory(g,c,k,e);function k(m){d=m;AdPlayerManager.addAdPlayer(d);if(a){a(f)}d.track(new AdEvent(AdEvent.INIT),null,f);while(h.length>0){(h.shift())()}}}i();return f});var AdPlayerManager=(function(){var g={};var a=[];var c=[];var e=[];g.isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;g.isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;g.isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;g.isFF=(navigator.userAgent.indexOf("Firefox")!=-1)?true:false;g.list=function(){return a};_factoryList=[];g.factoryList=function(){return _factoryList};var b=[];g.domIdList=function(){return b};g.searchCount=0;g.isSearching=function(h){if(g.searchCount==0){return false}else{return true}};g.addAdPlayer=function(j){for(var h=0;h<a.length;h++){if(typeof a[h].adDomElement!=="undefined"){if(a[h].adDomElement().id==j.adDomElement().id){return}}}a.push(j);d(j)};g.register=function(h){c.push(h)};g.unregister=function(j){for(var h=0;h<c.length;h++){if(c[h]==j){c.shift(h,1);return}}};g.getAdPlayerById=function(j){for(var h=0;h<a.length;h++){if(typeof a[h].adDomElement!=="undefined"){if(a[h].adDomElement().id==j){return a[h]}}else{log("DOM element is not properly specified.","getPlayerById")}}return null};g.getPlayerByDomElement=function(j){for(var h=0;h<a.length;h++){if(a[h].adDomElement()){if(a[h].adDomElement()==j){return a[h]}}else{log("DOM element is not properly specified.","getPlayerByDomElement")}}return null};g.getPlayerByUID=function(j){for(var h=0;h<a.length;h++){if(a[h].uid()){if(a[h].uid()==j){return a[h]}}}return null};function d(j){var h=c.length;var k=0;var i=0;do{if(typeof c[i]=="function"){c[i](j)}if(c>0){k=h-c.length;h=c.length}else{h=0}if(k==0){i++}}while(i<h)}function f(){var h=new PostMessageManager()}f();return g})()};