if(typeof AdPlayerManager==="undefined"){var AdPlayerManager=(function(){var d={};var a=[];var b=[];d.list=function(){return a};d.addAdPlayer=function(e){a.push(e);c(e)};d.register=function(e){b.push(e)};d.unregister=function(f){for(var e=0;e<b.length;e++){if(b[e]==f){b.shift(e,1);return}}};d.getAdPlayerById=function(f){for(var e=0;e<a.length;e++){if(a[e].adDomElement()){if(a[e].adDomElement().id==f){return a[e]}}else{log("DOM element is not properly specified.","getPlayerById")}}return null};d.getPlayerByDomElement=function(f){for(var e=0;e<a.length;e++){if(a[e].adDomElement()){if(a[e].adDomElement()==f){return a[e]}}else{log("DOM element is not properly specified.","getPlayerByDomElement")}}return null};function c(g){var e=b.length;var h=0;var f=0;do{if(typeof b[f]=="function"){b[f](g)}if(b>0){h=e-b.length;e=b.length}else{e=0}if(h==0){f++}}while(f<e)}return d})();var PrivacyInfo=(function(){var a={};a.adServer="";a.message="";a.url="";return a});var URLRequest=(function(a){var b={};b.url;if(a){b.url=a}b.load=function(){if(b.url){var d=document.createElement("img");d.src=(b.url);d.style.display="none";var c=document.getElementsByTagName("script")[0];log(b.url,"URLRequest");c.parentNode.insertBefore(d,c);c.parentNode.removeChild(d);delete d;delete c}else{log("URLRequest",'Parameter "url" is not defined.')}};return b});function AdEvent(d,f){var b="";this.type=function(g){if(g){b=g}return b};if(d){b=d}var e={};this.currentTarget=function(g){if(g){e=g}return e};var c=new Object();this.data=function(g){if(g){c=g}return c};if(f){c=f}var a;this.target=function(g){if(g){a=g}return a}}var defaultAdEvents=["INIT","LOAD","REMOVE","SHOW","HIDE","PROGRESS","TRACK","COUNT","CLICK","PRIVACY_CLICK","PRIVACY_OPEN","PRIVACY_CLOSE"];AdEvent.list=new Object();AdEvent.check=function(b){for(var a in AdEvent.list){if(AdEvent.list[a]==b){return true}}log("Ad Event type is not valid: "+b,"AdEvent");return false};AdEvent.map=function(a){AdEvent.list[a]="AdEvent."+a;AdEvent[a]="AdEvent."+a};for(var dae=0;dae<defaultAdEvents.length;dae++){AdEvent.map(defaultAdEvents[dae])}AbstractPlayer=(function(h,k){var f={};var j;f.uid=function(l){if(l){j=l}return j};f.uid(h);var g;f.adDomElement=function(l){if(l){g=l}return g};f.adDomElement(k);var d=new Object();f.adEventListObj=function(){return d};var c=false;f.isLoaded=function(l){if(l){c=l}return c};var i=false;f.isPrivacyPanelEnabled=function(l){if(l){i=l}return i};var b=null;f.adWidth=function(l){if(l){b=l;this.adDomElement().style.width=b+"px"}return b};var a=null;f.adHeight=function(l){if(l){a=l;this.adDomElement().style.height=a+"px"}return a};var e=[];f.privacyInfoList=function(){return e};f.addEventListener=function(l,m){};f.removeEventListener=function(l,m){};f.addTrackingPixel=function(l,m,n){};f.removeTrackingPixel=function(l,m){};f.track=function(m,l){};f.addPrivacyInfo=function(l,n,m){};f.enableAdChoice=function(){};f.disableAdChoice=function(){};f.showPrivacyInfo=function(){};f.hidePrivacyInfo=function(){};return f});var DefaultPlayer=(function(b,a){var c=new AbstractPlayer(b,a);c.addEventListener=function(d,f){if(!AdEvent.check(d)){return}if(!this.adEventListObj()[d]){this.adEventListObj()[d]=[]}for(var e=0;e<this.adEventListObj()[d].length;e++){if(this.adEventListObj()[d][e]==f){return}}this.adEventListObj()[d].push(f)};c.removeEventListener=function(d,f){if(!AdEvent.check(d)){return}if(this.adEventListObj()[d]){for(var e=0;e<this.adEventListObj()[d].length;e++){if(this.adEventListObj()[d][e]==f){this.adEventListObj()[d].splice(e,1);if(this.adEventListObj()[d].length==0){delete this.adEventListObj()[d]}return}}}};c.addTrackingPixel=function(d,e,g){if(!AdEvent.check(d)){return}if(g===undefined){g=true}if(e){function f(h){var i=new URLRequest(e);i.load();if(!g){h.player().removeEventListener(h.type(),f)}}f.url=e;f.repeat=g;this.addEventListener(d,f)}else{log("Parameter 'url' must be defined","addTrackingEvent")}};c.removeTrackingPixel=function(d,g){if(!AdEvent.check(d)){return}if(this.adEventListObj()[d]){var e=this.adEventListObj()[d].length;var h=0;var f=0;do{if(g){if(this.adEventListObj()[d][f].name=="defaultTrackCallBack"){if(this.adEventListObj()[d][f].url){if(this.adEventListObj()[d][f].url==g){this.adEventListObj()[d].splice(f,1);if(this.adEventListObj()[d].length==0){delete this.adEventListObj()[d];return}}}}}if(this.adEventListObj()[d]){h=e-this.adEventListObj()[d].length;e=this.adEventListObj()[d].length}else{e=0}if(h==0){f++}}while(f<e)}};c.track=function(i,f,g){if(!AdEvent.check(i.type())){return}log(i.type(),"track");if(this.adEventListObj()[i.type()]){var d=this.adEventListObj()[i.type()].length;var j=0;var e=0;do{i.target(c);if(g){i.currentTarget(g)}else{i.currentTarget(g)}if(f){i.data().url=f}this.adEventListObj()[i.type()][e](i);if(this.adEventListObj()[i.type()]){j=d-this.adEventListObj()[i.type()].length;d=this.adEventListObj()[i.type()].length}else{d=0}if(j==0){e++}}while(e<d)}if(f){var h=new URLRequest(f);h.load()}};c.addPrivacyInfo=function(d,g,f){var e=new PrivacyInfo();e.adServer=d;e.message=g;e.url=f;this.privacyInfoList().push(e)};c.privacyClickBtn;c.enableAdChoice=function(){if(!this.isPrivacyPanelEnabled()){this.privacyClickBtn=document.createElement("button");this.privacyClickBtn.setAttribute("class","privacyButton");this.privacyClickBtn.innerHTML="Get Info";this.adDomElement().style.position="relative";this.adDomElement().appendChild(this.privacyClickBtn);var d=this;this.privacyClickBtn.onclick=function(){d.showPrivacyInfo()}}};c.disableAdChoice=function(){if(this.isPrivacyPanelEnabled()){if(this.privacyClickBtn){this.adDomElement().removeChild(this.privacyClickBtn)}}};c.privacyPanel;c.showPrivacyInfo=function(){if(!this.privacyPanel){this.privacyPanel=document.createElement("div");this.privacyPanel.setAttribute("class","privacyPanel");var g=document.createElement("ul");var e=document.createElement("button");var f=this;this.privacyPanel.appendChild(g);this.privacyPanel.appendChild(e);this.adDomElement().appendChild(this.privacyPanel);e.innerHTML="Close";for(var d=0;d<this.privacyInfoList().length;d++){var h=document.createElement("li");privacyClick=function(i){var j=new Object();j.url=i;f.track(new AdEvent(AdEvent.PRIVACY_CLICK,j));window.open(i)};h.innerHTML=this.privacyInfoList()[d].adServer+"<span>"+this.privacyInfoList()[d].message+"<br/><a href=\"javascript:privacyClick('"+this.privacyInfoList()[d].url+'\');" target="_self">Opt Out</a></span>';g.appendChild(h)}this.isPrivacyPanelEnabled(true);e.onclick=function(){f.hidePrivacyInfo()};this.track(new AdEvent(AdEvent.PRIVACY_OPEN))}};c.hidePrivacyInfo=function(){if(this.privacyPanel){this.isPrivacyPanelEnabled(false);this.adDomElement().removeChild(this.privacyPanel);this.privacyPanel=null;this.track(new AdEvent(AdEvent.PRIVACY_CLOSE))}};return c});var PlayerFactory=(function(c,e,a,d){var g=(window.location!=window.parent.location)?true:false;if(g){d(new DefaultPlayer(c,a));return}if(a){var b=AdPlayerManager.getPlayerByDomElement(a);if(b){d(b)}else{f(c,e,a,d)}}else{f(c,e,a,d)}function f(k,m,h,l){var o=new Date().getTime();var n=document.getElementById(m);if(!n){log('WARNING: No valid referral element specified for "'+k+'". Referral will be created using "document.write"',"parentDomSearch");m="ref"+o;document.write('<span id="'+m+'"></span>')}function j(t,s){var q=setInterval(p,100);var u=this;var r=0;function p(){r++;if(r==10){clearInterval(q);log("No Valid Ad Player could be found. Creating default...","refWait");l(new DefaultPlayer(k,h))}if(document.getElementById(t)){clearInterval(q);s(t)}}}function i(r){var p=document.getElementById(r).parentNode;while(!AdPlayerManager.getAdPlayerById(p.id)){p=p.parentNode;parName=p.nodeName.toLowerCase();if((parName=="body")||(parName=="html")){break}}if(p){var q=AdPlayerManager.getAdPlayerById(p.id);if(q){if(l){l(q)}}else{l(new DefaultPlayer(k,h))}}}j(m,i)}});log=function(b,a){if(typeof(console)!=="undefined"&&console!=null){if(a){console.log("AdPlayer("+a+"): "+b)}else{console.log("AdPlayer: "+b)}}};var AdPlayer=(function(f,c,a){var k=document.getElementById(c);var h=[];var e=new AbstractPlayer(f,k);var d;e.player=function(){return d};e.adDomElement=function(l){return d.adDomElement(l)};e.adEventListObj=function(){return d.adEventListObj()};e.isLoaded=function(l){return d.isLoaded(l)};e.isPrivacyPanelEnabled=function(l){return d.isPrivacyPanelEnabled(l)};e.adWidth=function(l){return d.adWidth(l)};e.adHeight=function(l){return d.adHeight(l)};e.privacyInfoList=function(){return d.privacyInfoList()};var g=[];function j(m,l){if(!d){g.push(b(e[m],e,l));return}d[m].apply(e,l)}function b(m,l,n){return function(){m.apply(l,n)}}e.addEventListener=function(l,m){j("addEventListener",[l,m,this])};e.removeEventListener=function(l,m){j("removeEventListener",[l,m,this])};e.addTrackingPixel=function(l,m,n){j("addTrackingPixel",[l,m,n,this])};e.removeTrackingPixel=function(l,m){j("removeTrackingPixel",[l,m,this])};e.track=function(m,l){j("track",[m,l,this])};e.addPrivacyInfo=function(l,n,m){j("addPrivacyInfo",[l,n,m,this])};e.enableAdChoice=function(){j("enableAdChoice",[this])};e.disableAdChoice=function(){j("disableAdChoice",[this])};e.showPrivacyInfo=function(){j("showPrivacyInfo",[this])};e.hidePrivacyInfo=function(){j("hidePrivacyInfo",[this])};function i(){var m=new PlayerFactory(f,c,k,l);function l(n){d=n;AdPlayerManager.addAdPlayer(d);if(a){a(e)}d.track(new AdEvent(AdEvent.INIT),null,e);while(g.length>0){(g.shift())()}}}i();return e})};